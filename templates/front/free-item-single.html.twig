{% extends 'base.html.twig' %}



{% block main %}

    <main>
            
        <div class="all-categories-nav">

            <a href="{{path('main_page')}}"><i class="fas fa-arrow-circle-left"></i> Back to All Free Items</a>

        </div>

        <div class="edit-delete-controls">

            <a href="{{path('edit_free_item', {'id':freeItem.id})}}" class="edit">
            
                Edit <i class="far fa-edit edit"></i>

            </a>

            <a href="{{path('delete_free_item', {'id':freeItem.id})}}" onclick="return confirm('Are you sure you want to delete this Freebie?')" class="delete">
        
                Delete <i class="fas fa-minus-circle delete"></i>

            </a>

        </div>
        
        <div class="free-item-single-container">

            <h1 class="free-item-single-title">{{freeItem.title}}</h1>

            <a class="free-item-single-share"><i class="fas fa-share-alt fa-2x"></i></a>

                <!-- Slideshow container -->
                <div class="slideshow-container">

                    {% if freeItem.freeItemPictures|length < 1 %}
                    
                        <img class="free-item-single-image" src="" alt="No Images for this Free Item :(">
                    
                    {% else %}
                        
                        {% for freeItemPicture in freeItem.freeItemPictures %}
                            
                            <div class="mySlides fade">

                                <img id="myImg" class="myImages free-item-single-image" src="{{asset('assets/images/free-item-images/' ~ freeItemPicture.name)}}">

                            </div>

                        {% endfor %}

                        {% if freeItem.freeItemPictures|length > 1 %}
                            
                            <!-- Next and previous buttons -->
                            <div class="image-control-container">
                                <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                                <a class="next" onclick="plusSlides(1)">&#10095;</a>
                            </div>

                        {% endif %}

                    {% endif %}

                </div>

                {# Modal for image enlargement #}

                        <div id="myModal" class="modal">

                                <i class="close fas fa-times fa-2x"></i>

                                {% if freeItem.freeItemPictures|length > 1 %}

                                    <div class="image-control-container">  

                                        <a class="prev" onclick="plusEnlargedSlides(-1)">&#10094;</a>
                                        <a class="next" onclick="plusEnlargedSlides(1)">&#10095;</a>

                                    </div>

                                {% else %}

                                        <h2>1/1</h2>

                                {% endif %}

                                {% if freeItem.freeItemPictures|length < 1 %}
                        
                                    <img class="free-item-single-image" src="" alt="No Images for this Free Item :(">
                                
                                {% else %}
                                    
                                    {% for freeItemPicture in freeItem.freeItemPictures %}
                                        
                                        <div class="myEnlargedSlides fade">

                                            <img class="myEnlargedImages modal-content" id="myImg" src="{{asset('assets/images/free-item-images/' ~ freeItemPicture.name)}}">

                                        </div>

                                    {% endfor %}

                                {% endif %}

                        </div>

            <p class="free-item-single-description">{{freeItem.description}}</p>
            <h3 class="free-item-single-location">{{freeItem.location}}</h3>
            <a class="free-item-single-user">Contact Freebie User</a>
            <h4 class="free-item-single-date">{{freeItem.date|date('D d/m/y')}} | {{freeItem.time|date('H')}}:{{freeItem.time|date('i')}}</h4>

        </div>
    
    </main>

{% endblock %}

{% block javascripts %}

<script>

// Single Item Slide Show container

var slideIndex = 1;
showSlides(slideIndex);

function plusSlides(n) {
  showSlides(slideIndex += n);
}

function currentSlide(n) {
  showSlides(slideIndex = n);
}

function showSlides(n) {
  var i;
  var slides = document.getElementsByClassName("mySlides");
  if (n > slides.length) {slideIndex = 1}
  if (n < 1) {slideIndex = slides.length}
  for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
  }

  slides[slideIndex-1].style.display = "grid";
}

// Modal for larger enlarged images

// create references to the modal...
var modal = document.getElementById('myModal');
// to all images -- note I'm using a class!
var images = document.getElementsByClassName('myImages');

// Go through all of the images with our custom class
for (var i = 0; i < images.length; i++) {
  var img = images[i];
  // and attach our click listener for this image.
  img.onclick = function(evt) {
    modal.style.display = "grid";
  }
}

var span = document.getElementsByClassName("close")[0];

span.onclick = function() {
  modal.style.display = "none";
}

// Single Item Modal Slide Show container

var slideEnlargedIndex = 1;
showEnlargedSlides(slideEnlargedIndex);

function plusEnlargedSlides(n) {
  showEnlargedSlides(slideEnlargedIndex += n);
}

function currentEnlargedSlide(n) {
  showEnlargedSlides(slideEnlargedIndex = n);
}

function showEnlargedSlides(n) {
  var i;
  var slides = document.getElementsByClassName("myEnlargedSlides");
  if (n > slides.length) {slideEnlargedIndex = 1}
  if (n < 1) {slideEnlargedIndex = slides.length}
  for (i = 0; i < slides.length; i++) {
      slides[i].style.display = "none";
  }

  slides[slideEnlargedIndex-1].style.display = "grid";
}

</script>

{% endblock %}

